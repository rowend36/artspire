import{o as g,c as v,a as y,f as m,A,g as S,_ as P,k as $,t as B,B as x,j as F,w as H,C as D,r as V,p as M,l as W,T as q,F as w,d as I,h as N,n as E,s as R,v as T}from"./index-9c443ebc.js";import{a as Z}from"./api-23431545.js";const G={width:"366",height:"381",viewBox:"81.5 0 385.5 381",fill:"blue",xmlns:"http://www.w3.org/2000/svg"},O=["fill"],Y=y("defs",null,[y("clipPath",{id:"shape"},[y("path",{d:"M230.845 33.3891L197.114 3.51645C194.919 1.57298 192.089 0.5 189.158 0.5H12C5.37258 0.5 0 5.87259 0 12.5V368.5C0 375.127 5.37257 380.5 12 380.5H454C460.627 380.5 466 375.127 466 368.5V48.4055C466 41.7781 460.627 36.4055 454 36.4055H238.801C235.87 36.4055 233.04 35.3325 230.845 33.3891Z",fill:"#D9D9D9"})])],-1),J=y("rect",{width:"643",height:"643","clip-path":"url(#shape)",fill:"#dedede"},null,-1),K=["xlink:href"],Q={__name:"FolderIcon",props:{image:String,isMobileApp:Boolean},setup(e){return(t,o)=>(g(),v("svg",G,[y("path",{d:"M337.313 49.8819L359.585 53L454 53C460.627 53 466 47.6274 466 41L466 32C466 25.3726 460.627 20 454 20L222 20C215.373 20 210 25.3726 210 32L210 37.8819C210 44.5093 215.373 49.8819 222 49.8819L337.313 49.8819Z",fill:e.isMobileApp?"var(--primary-light)":"#FF9900"},null,8,O),Y,J,e.image?(g(),v("image",{key:0,width:"643",height:"643","clip-path":"url(#shape)","xlink:href":m(A)(e.image).auto("format").fit("min").width(720).toString(),preserveAspectRatio:"xMidYMid slice"},null,8,K)):S("",!0)]))}};const U={class:"font-lg grotesk"},X={__name:"ProjectFolder",props:{item:{type:Object,required:!0}},setup(e){return(t,o)=>(g(),v("div",{class:"cursor-pointer hover-zoom touch-ripple",onClick:o[0]||(o[0]=c=>t.$router.push("/projects/"+e.item.id))},[$(Q,{class:"folder-icon",image:e.item.previewImage,"is-mobile-app":!e.item.types||e.item.types.includes("Mobile App")},null,8,["image","is-mobile-app"]),y("p",U,B(e.item.title),1)]))}},z=P(X,[["__scopeId","data-v-240e2485"]]);const ee=["data-index"],te={__name:"ProjectImage",props:{info:{required:!0}},setup(e){const t=e,o=x(()=>t.info.item);return(c,n)=>{const s=F("sanity-img");return g(),v("div",{"data-index":e.info.i+":"+e.info.preserveAspect},[$(s,{src:m(o).previewImage,class:"block hover-zoom p-1 img"},null,8,["src"])],8,ee)}}},oe=P(te,[["__scopeId","data-v-f5dd9998"]]);function C(e,t=!1){t==!1&&([e,t]=[0,e]);const o=[];for(var c=e;c<t;c++)o.push(c);return o}function se(e,t,o){return t===0||o[t-1]!==e}function ie(e,t=3,o=7,c=250){const n=C(t).map(()=>[]),s=C(t).map(()=>0),p=e.filter(i=>i.height),h=p.reduce((i,u)=>i+u.height,0)/p.length||1;let a=!1;e=[...e,{cols:t,height:1,shrinkWeight:o,aspectWeight:o,minHeight:1,isStub:!0}];for(let i=0;i<e.length;i++)if(a=a||e[i].height===void 0,a)n[i%t].push({...e[i],i,cols:1,y:s[i%t],height:c,col:i%t}),s[i%t]+=c;else{console.log({columns:n,totalHeights:s,"sizes[i]":e[i],sizes:e,offsetWeight:o,averageCellHeight:h});const{colSpan:u,cellHeight:l,_y:f,col:r}=ne(n,s,e[i],o,h),_={...e[i],i,y:f,height:l,cols:u,col:r,_original:e[i]};for(let d=0;d<u;d++){const b=n[r+d],L=f-s[r+d];L!==0&&b[b.length-1].col===r+d&&(b[b.length-1].height+=L),s[r+d]=f+l,_.isStub||b.push(_)}}return n}const ne=(e,t,o,c,n)=>{const s=Math.min(...t);let p=o.cols,h=null;for(let a=p;a>0;a--){const i=o.preserveAspect?o.preserveAspect==="balanced"?(1+a/p)/2:a/p:1;for(let u=0;u<=e.length-a;u++){const l=le(e.slice(u,u+a),t.slice(u,u+a),u,Math.max(o.minHeight,o.height*i),s,c,n);l&&(l.score*=Math.pow(p/a,o.shrinkWeight??4)/i,(!h||l.score<h.score)&&(h=l))}}return h},le=(e,t,o,c,n,s,p)=>{const h=Math.min(...t),i=Math.max(...t)-h,u=[...t,h+i*.5,h+i*.75,h+i*.875].sort().reverse().filter(se);let l=1/0,f=null;for(let r of u)if(e.length===1||ce(e,t,r,o)){const _=re(e,t,r)+Math.pow((1+r+Math.min(r-n,c)-n)/p,s);_<l&&(l=_,f={_y:r,col:o,cellHeight:c,colSpan:e.length,score:l})}return f},ce=(e,t,o,c)=>{for(let n=0;n<e.length;n++){if(t[n]===o)continue;const s=e[n][e[n].length-1];if(!s||s.col<c||s.col+s.cols>c+e.length||s.height-s.minHeight<=t[n]-o)return!1}return!0},re=(e,t,o,c)=>{let n=1;if(o===0)return n;for(let s=0;s<e.length;s++){const p=e[s][e[s].length-1];if(t[s]===o)continue;const h=o-t[s],a=p._original.height/p._original.cols*p.cols,i=Math.pow(p.height+h>a?a/(p.height+h):(p.height+h)/a,p.aspectWeight??1);n+=1/i}return n};function k(e,t="ref("+e.value+")"){console.log("watching "+t),H(e,()=>console.log(t+" changed to ",e.value))}const j=e=>(R("data-v-2c3e2874"),e=e(),T(),e),ae=j(()=>y("span",{class:"project-item stub"},null,-1)),he=j(()=>y("span",{class:"project-item stub"},null,-1)),pe=j(()=>y("span",{class:"project-item stub"},null,-1)),ue=j(()=>y("span",{class:"project-item stub"},null,-1)),de={__name:"ProjectList",props:{tab:String},setup(e){const t=e,o=Z(),c=x(()=>{var l,f;return(f=(l=o.value)==null?void 0:l.filter)==null?void 0:f.call(l,r=>!r.types||r.types.includes(m(t.tab)))}),n=l=>(/-(\d+)x(\d+)-/.exec(l)||[]).slice(1).map(parseFloat),s=x(()=>{switch(t.tab){case"Art & Illustration":case"Brand":return"freeflow";default:return"flex"}}),p=D().stop,h=x(()=>({xs:1,sm:2,md:3,lg:3,xl:4})[p.value]),a=V(null),i=x(()=>a.value&&h.value?a.value.clientWidth/h.value:null),u=x(()=>{try{return console.time("masonry"),s.value==="freeflow"&&c.value&&ie(c.value.map(l=>{const[f=200,r=200]=n(l.previewImage),_=r/f||Math.random()<.333?.65:Math.random()>.5?1:1.5,d=_<.67?2:1;return console.log({width:f,height:r}),{cols:d,height:_*d,sizeWeight:0,item:l,minHeight:1}}),h.value,15)}finally{console.timeEnd("masonry")}});return k(u),k(s,"type"),k(o,"projects"),k(c,"list"),(l,f)=>(g(),M(q,{name:"left-right"},{default:W(()=>[(g(),v("div",{key:e.tab,ref_key:"grid",ref:a,class:E(["items",m(s)==="flex"?"flex-items":"freeflow-items"])},[m(s)==="flex"?(g(!0),v(w,{key:0},I(m(c),r=>(g(),M(z,{item:r,key:r.title,class:"project-item"},null,8,["item"]))),128)):m(i)?(g(!0),v(w,{key:1},I(m(u),(r,_)=>(g(),v("div",{key:_,style:{flexGrow:1,width:0}},[(g(!0),v(w,null,I(r,d=>(g(),M(oe,{info:d,class:"freeflow-item",key:d.i,style:N({width:d.cols*100+"%",height:m(i)*d.height+"px",visibility:d.col===_?"visible":"hidden"})},null,8,["info","style"]))),128))]))),128)):S("",!0),m(s)==="flex"?(g(),v(w,{key:2},[ae,he,pe,ue],64)):S("",!0)],2))]),_:1}))}},_e=P(de,[["__scopeId","data-v-2c3e2874"]]);export{_e as default};
