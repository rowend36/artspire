import{r as U,D as te,x as re,y as ne,w as q,E as ie,G as ae,H as oe,I as S,J as ue}from"./index-9c443ebc.js";var j=new WeakMap,J=0;function le(t){if(!t.length)return"";for(var n="arg",e=0;e<t.length;++e){var i=void 0;t[e]===null||typeof t[e]!="object"&&typeof t[e]!="function"?typeof t[e]=="string"?i='"'+t[e]+'"':i=String(t[e]):j.has(t[e])?i=j.get(t[e]):(i=J,j.set(t[e],J++)),n+="@"+i}return n}function se(t){if(typeof t=="function")try{t=t()}catch{t=""}return Array.isArray(t)?t=le(t):t=String(t||""),t}var $=function(){function t(n){n===void 0&&(n=0),this.items=new Map,this.ttl=n}return t.prototype.serializeKey=function(n){return se(n)},t.prototype.get=function(n){var e=this.serializeKey(n);return this.items.get(e)},t.prototype.set=function(n,e,i){var a=this.serializeKey(n),r=i||this.ttl,u=Date.now(),l={data:e,createdAt:u,expiresAt:r?u+r:1/0};this.dispatchExpire(r,l,a),this.items.set(a,l)},t.prototype.dispatchExpire=function(n,e,i){var a=this;n&&setTimeout(function(){var r=Date.now(),u=r>=e.expiresAt;u&&a.delete(i)},n)},t.prototype.delete=function(n){this.items.delete(n)},t}();function fe(){return typeof navigator.onLine<"u"?navigator.onLine:!0}function ce(){return typeof document<"u"&&typeof document.visibilityState<"u"?document.visibilityState!=="hidden":!0}var de=function(t){return fetch(t).then(function(n){return n.json()})};const K={isOnline:fe,isDocumentVisible:ce,fetcher:de};var g=globalThis&&globalThis.__assign||function(){return g=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++){n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},g.apply(this,arguments)},b=globalThis&&globalThis.__awaiter||function(t,n,e,i){function a(r){return r instanceof e?r:new e(function(u){u(r)})}return new(e||(e=Promise))(function(r,u){function l(s){try{o(i.next(s))}catch(v){u(v)}}function c(s){try{o(i.throw(s))}catch(v){u(v)}}function o(s){s.done?r(s.value):a(s.value).then(l,c)}o((i=i.apply(t,n||[])).next())})},E=globalThis&&globalThis.__generator||function(t,n){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,a,r,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(s){return c([o,s])}}function c(o){if(i)throw new TypeError("Generator is already executing.");for(;e;)try{if(i=1,a&&(r=o[0]&2?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,a=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){e.label=o[1];break}if(o[0]===6&&e.label<r[1]){e.label=r[1],r=o;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(o);break}r[2]&&e.ops.pop(),e.trys.pop();continue}o=n.call(t,e)}catch(s){o=[6,s],a=0}finally{i=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ve=globalThis&&globalThis.__read||function(t,n){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var i=e.call(t),a,r=[],u;try{for(;(n===void 0||n-- >0)&&!(a=i.next()).done;)r.push(a.value)}catch(l){u={error:l}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(u)throw u.error}}return r},he=globalThis&&globalThis.__spreadArray||function(t,n,e){if(e||arguments.length===2)for(var i=0,a=n.length,r;i<a;i++)(r||!(i in n))&&(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))},Q=new $,O=new $,L=new $,X={cache:Q,refreshInterval:0,ttl:0,serverTTL:1e3,dedupingInterval:2e3,revalidateOnFocus:!0,revalidateDebounce:0,shouldRetryOnError:!0,errorRetryInterval:5e3,errorRetryCount:5,fetcher:K.fetcher,isOnline:K.isOnline,isDocumentVisible:K.isDocumentVisible};function ye(t,n,e){var i=O.get(t);if(i)i.data.push(n);else{var a=5e3;O.set(t,[n],e>0?e+a:e)}}function pe(t,n,e){if(e.isDocumentVisible()&&!(e.errorRetryCount!==void 0&&n>e.errorRetryCount)){var i=Math.min(n||0,e.errorRetryCount),a=i*e.errorRetryInterval;setTimeout(function(){t(null,{errorRetryCount:i+1,shouldRetryOnError:!0})},a)}}var B=function(t,n,e,i){return e===void 0&&(e=Q),i===void 0&&(i=X.ttl),b(void 0,void 0,void 0,function(){var a,r,u,l,c,o,s;return E(this,function(v){switch(v.label){case 0:if(!me(n))return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n];case 2:return a=v.sent(),[3,4];case 3:return l=v.sent(),r=l,[3,4];case 4:return[3,6];case 5:a=n,v.label=6;case 6:return u=!1,c={data:a,error:r,isValidating:u},typeof a<"u"&&e.set(t,c,i),o=O.get(t),o&&o.data.length&&(s=o.data.filter(function(y){return y.key===t}),s.forEach(function(y,d){typeof c.data<"u"&&(y.data=c.data),y.error=c.error,y.isValidating=c.isValidating;var m=d===s.length-1;m||delete s[d]}),s=s.filter(Boolean)),[2,c]}})})};function ge(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var i,a,r=g({},X),u=!1,l=!1,c=oe(),o=(c==null?void 0:c.proxy)||c;if(!o)return console.error("Could not get current instance, check to make sure that `useSwrv` is declared in the top level of the setup function."),null;var s=(o==null?void 0:o.$isServer)||!1;n.length>=1&&(i=n[0]),n.length>=2&&(a=n[1]),n.length>2&&(r=g(g({},r),n[2]));var v=s?r.serverTTL:r.ttl,y=typeof i=="function"?i:U(i);typeof a>"u"&&(a=r.fetcher);var d=null;d||(d=te({data:void 0,error:void 0,isValidating:!0,key:null}));var m=function(h,f){return b(t,void 0,void 0,function(){var P,p,R,A,x,F,C,W=this;return E(this,function(D){switch(D.label){case 0:return P=d.data===void 0,p=y.value,p?(R=r.cache.get(p),A=R&&R.data,d.isValidating=!0,A&&(d.data=A.data,d.error=A.error),x=h||a,!x||!r.isDocumentVisible()&&!P||(f==null?void 0:f.forceRevalidate)!==void 0&&!(f!=null&&f.forceRevalidate)?(d.isValidating=!1,[2]):R&&(F=Boolean(Date.now()-R.createdAt>=r.dedupingInterval||(f==null?void 0:f.forceRevalidate)),!F)?(d.isValidating=!1,[2]):(C=function(){return b(W,void 0,void 0,function(){var _,Y,V,H;return E(this,function(I){switch(I.label){case 0:return _=L.get(p),_?[3,2]:(Y=Array.isArray(p)?p:[p],V=x.apply(void 0,he([],ve(Y),!1)),L.set(p,V,r.dedupingInterval),[4,B(p,V,r.cache,v)]);case 1:return I.sent(),[3,4];case 2:return[4,B(p,_.data,r.cache,v)];case 3:I.sent(),I.label=4;case 4:return d.isValidating=!1,L.delete(p),d.error!==void 0&&(H=!u&&r.shouldRetryOnError&&(f?f.shouldRetryOnError:!0),H&&pe(m,f?f.errorRetryCount:1,r)),[2]}})})},A&&r.revalidateDebounce?(setTimeout(function(){return b(W,void 0,void 0,function(){return E(this,function(_){switch(_.label){case 0:return u?[3,2]:[4,C()];case 1:_.sent(),_.label=2;case 2:return[2]}})})},r.revalidateDebounce),[3,3]):[3,1])):[2];case 1:return[4,C()];case 2:D.sent(),D.label=3;case 3:return[2]}})})},T=function(){return b(t,void 0,void 0,function(){return E(this,function(h){return[2,m(null,{shouldRetryOnError:!1})]})})},w=null;re(function(){var h=function(){return b(t,void 0,void 0,function(){return E(this,function(f){switch(f.label){case 0:return!d.error&&r.isOnline()?[4,m()]:[3,2];case 1:return f.sent(),[3,3];case 2:w&&clearTimeout(w),f.label=3;case 3:return r.refreshInterval&&!u&&(w=setTimeout(h,r.refreshInterval)),[2]}})})};r.refreshInterval&&(w=setTimeout(h,r.refreshInterval)),r.revalidateOnFocus&&(document.addEventListener("visibilitychange",T,!1),window.addEventListener("focus",T,!1))}),ne(function(){u=!0,w&&clearTimeout(w),r.revalidateOnFocus&&(document.removeEventListener("visibilitychange",T,!1),window.removeEventListener("focus",T,!1));var h=O.get(y.value);h&&(h.data=h.data.filter(function(f){return f!==d}))});try{q(y,function(h){ie(y)||(y.value=h),d.key=h,d.isValidating=Boolean(h),ye(y.value,d,v),!s&&!l&&y.value&&m(),l=!1},{immediate:!0})}catch{}var ee=g(g({},ae(d)),{mutate:function(h,f){return m(h,g(g({},f),{forceRevalidate:!0}))}});return ee}function me(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Z={},z={},G={};Object.defineProperty(G,"__esModule",{value:!0});var M=new WeakMap,N=0;function _e(t){if(!t.length)return"";for(var n="arg",e=0;e<t.length;++e){var i=void 0;t[e]===null||typeof t[e]!="object"&&typeof t[e]!="function"?typeof t[e]=="string"?i='"'+t[e]+'"':i=String(t[e]):M.has(t[e])?i=M.get(t[e]):(i=N,M.set(t[e],N++)),n+="@"+i}return n}G.default=_e;var we=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(z,"__esModule",{value:!0});var be=we(G);function Ee(t){if(typeof t=="function")try{t=t()}catch{t=""}return Array.isArray(t)?t=(0,be.default)(t):t=String(t||""),t}var Se=function(){function t(n){n===void 0&&(n=0),this.items=new Map,this.ttl=n}return t.prototype.serializeKey=function(n){return Ee(n)},t.prototype.get=function(n){var e=this.serializeKey(n);return this.items.get(e)},t.prototype.set=function(n,e,i){var a=this.serializeKey(n),r=i||this.ttl,u=Date.now(),l={data:e,createdAt:u,expiresAt:r?u+r:1/0};this.dispatchExpire(r,l,a),this.items.set(a,l)},t.prototype.dispatchExpire=function(n,e,i){var a=this;n&&setTimeout(function(){var r=Date.now(),u=r>=e.expiresAt;u&&a.delete(i)},n)},t.prototype.delete=function(n){this.items.delete(n)},t}();z.default=Se;var Re=S&&S.__extends||function(){var t=function(n,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])},t(n,e)};return function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(n,e);function i(){this.constructor=n}n.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ae=S&&S.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Z,"__esModule",{value:!0});var Te=Ae(z),Ie=function(t){Re(n,t);function n(e,i){e===void 0&&(e="swrv"),i===void 0&&(i=0);var a=t.call(this,i)||this;return a.STORAGE_KEY=e,a}return n.prototype.encode=function(e){return JSON.stringify(e)},n.prototype.decode=function(e){return JSON.parse(e)},n.prototype.get=function(e){var i=localStorage.getItem(this.STORAGE_KEY);if(i){var a=this.serializeKey(e),r=JSON.parse(i)[a];return(r==null?void 0:r.expiresAt)===null&&(r.expiresAt=1/0),r}},n.prototype.set=function(e,i,a){var r,u={},l=this.serializeKey(e),c=a||this.ttl,o=localStorage.getItem(this.STORAGE_KEY),s=Date.now(),v={data:i,createdAt:s,expiresAt:c?s+c:1/0};o?(u=this.decode(o),u[l]=v):u=(r={},r[l]=v,r),this.dispatchExpire(c,v,l),localStorage.setItem(this.STORAGE_KEY,this.encode(u))},n.prototype.dispatchExpire=function(e,i,a){var r=this;e&&setTimeout(function(){var u=Date.now(),l=u>=i.expiresAt;l&&r.delete(a)},e)},n.prototype.delete=function(e){var i=localStorage.getItem(this.STORAGE_KEY),a={};i&&(a=this.decode(i),delete a[e]),localStorage.setItem(this.STORAGE_KEY,this.encode(a))},n}(Te.default),Oe=Z.default=Ie;const xe=(t,n)=>fetch(t,n).then(e=>e.json()),Ce=new Oe("artspire"),k=(t,n)=>{const e=ge(ue(t),xe,{dedupingInterval:6e4,cache:Ce}),i=U(void 0);return q(e.data,async()=>{if(!e.data.value)return;const a=e.data.value.result;n!=null&&n.single?i.value=a.length>0?a[0]:null:i.value=a},{immediate:!0}),i},Ve=function(){return k(`*[_type=='portfolio']{
    title,
      "id":_id,
      "previewImage":previewImage.asset._ref,
      types
  }
`)},je=function(t){return k(`*[_type=='portfolio' && _id=='${t.replace(/'/g," ")}']{
    title,
      showPreviewImage,
      "id":_id,
      "previewImage":previewImage.asset._ref,
      "footer":footer.asset._ref,
      sections[]{"image":image.asset._ref,description}
  }
`,{single:!0})};export{Ve as a,je as u};
